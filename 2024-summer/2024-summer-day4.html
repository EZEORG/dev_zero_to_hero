<!DOCTYPE html>
<html lang="zh" data-accent-color="violet" data-content_root="../">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Day4 SSHä¸Django - Dev_zero_to_hero 0.0.1 æ–‡æ¡£</title><link rel="index" title="ç´¢å¼•" href="../genindex.html" /><link rel="search" title="æœç´¢" href="../search.html" /><link rel="next" title="Day5 Dockerä¸å°çº¢ä¹¦çˆ¬è™«é¡¹ç›®" href="2024-summer-day5.html" /><link rel="prev" title="Day3 Python å¼€å‘ç¯å¢ƒæ­è½½" href="2024-summer-day3.html" /><script>
    function setColorMode(t){let e=document.documentElement;e.setAttribute("data-color-mode",t);let a=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,s=t;"auto"===t&&(s=a?"dark":"light"),"light"===s?(e.classList.remove("dark"),e.classList.add("light")):(e.classList.remove("light"),e.classList.add("dark"))}
    setColorMode(localStorage._theme||"auto");
  </script><link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=397bb51e" />
    <link rel="stylesheet" type="text/css" href="../_static/shibuya.css?v=83eaa723" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link media="print" rel="stylesheet" type="text/css" href="../_static/print.css?v=20ff2c19" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --sy-f-text: "Inter", var(--sy-f-sys), var(--sy-f-cjk), sans-serif;
  --sy-f-heading: "Inter", var(--sy-f-sys), var(--sy-f-cjk), sans-serif;
}
</style>
    <meta property="og:type" content="website"/><meta property="og:title" content="Day4 SSHä¸Django"/>
<meta name="twitter:card" content="summary"/>
  </head>
<body><div class="sy-head">
  <div class="sy-head-blur"></div>
  <div class="sy-head-inner sy-container mx-auto">
    <a class="sy-head-brand" href="../index.html">
      
      
      <strong>Dev_zero_to_hero</strong>
    </a>
    <div class="sy-head-nav" id="HeadNav">
      <nav class="sy-head-links"></nav>
      <div class="sy-head-extra flex items-center print:hidden"><form class="searchbox flex items-center" action="../search.html" method="get">
  <input type="text" name="q" placeholder="æœç´¢" />
  <kbd>/</kbd>
</form><div class="sy-head-socials"></div></div>
    </div>
    <div class="sy-head-actions flex items-center shrink-0 print:hidden"><button class="js-theme theme-switch flex items-center"
data-aria-auto="åˆ‡æ¢åˆ°äº®è‰²æ¨¡å¼"
data-aria-light="åˆ‡æ¢åˆ°æš—è‰²æ¨¡å¼"
data-aria-dark="åˆ‡æ¢åˆ°è‡ªåŠ¨æ¨¡å¼">
<i class="i-lucide theme-icon"></i>
</button><button class="md:hidden flex items-center js-menu" aria-label="Menu" type="button" aria-controls="HeadNav" aria-expanded="false">
        <div class="hamburger">
          <span class="hamburger_1"></span>
          <span class="hamburger_2 -translate-x-2"></span>
          <span class="hamburger_3 -translate-x-1"></span>
        </div>
      </button>
    </div>
  </div>
</div>
<div class="sy-page sy-container flex mx-auto">
  <aside id="lside" class="sy-lside md:w-72 md:shrink-0 print:hidden">
    <div class="sy-lside-inner md:sticky">
      <div class="sy-scrollbar p-6">
        <div class="globaltoc" data-expand-depth="0"><p class="caption" role="heading" aria-level="3"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/git.html">Git for Teams</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/os_mp_celery_scrapy.html">Scrapy + Celery + Multiprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/os_mp_celery_scrapy.html#id5">æ€»ç»“</a></li>
</ul>
<p class="caption" role="heading" aria-level="3"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="2024-summer-day0.html">Day0 Markdown</a></li>
<li class="toctree-l1"><a class="reference internal" href="2024-summer-day1.html">Day1 Linuxã€VScodeä¸Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="2024-summer-day2.html">Day2 The Missing Semester of Your CS Education</a></li>
<li class="toctree-l1"><a class="reference internal" href="2024-summer-day3.html">Day3 Python å¼€å‘ç¯å¢ƒæ­è½½</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Day4 SSHä¸Django</a></li>
<li class="toctree-l1"><a class="reference internal" href="2024-summer-day5.html">Day5 Dockerä¸å°çº¢ä¹¦çˆ¬è™«é¡¹ç›®</a></li>
</ul>

        </div>
      </div>
    </div>
  </aside>
  <div class="lside-overlay js-menu" role="button" aria-label="Close left sidebar" aria-controls="lside" aria-expanded="false"></div>
  <aside id="rside" class="sy-rside pb-3 w-64 shrink-0 order-last">
    <button class="rside-close js-menu xl:hidden" aria-label="Close Table of Contents" type="button" aria-controls="rside" aria-expanded="false">
      <i class="i-lucide close"></i>
    </button>
    <div class="sy-scrollbar sy-rside-inner px-6 xl:top-16 xl:sticky xl:pl-0 pt-6 pb-4"><div class="localtoc"><h3>è¯¥é¡µå†…å®¹</h3><ul>
<li><a class="reference internal" href="#windowsssh">Windows&#31995;&#32479;&#19979;&#30340;ssh&#23494;&#38053;</a></li>
<li><a class="reference internal" href="#django">Django</a><ul>
<li><a class="reference internal" href="#id1">&#25968;&#25454;&#24211;</a></li>
<li><a class="reference internal" href="#id2">&#31649;&#29702;&#21592;&#36134;&#21495;</a></li>
</ul>
</li>
</ul>
</div><div id="ethical-ad-placement" data-ea-publisher="readthedocs"></div></div>
  </aside>
  <div class="rside-overlay js-menu" role="button" aria-label="Close Table of Contents" aria-controls="rside" aria-expanded="false"></div>
  <main class="sy-main w-full max-sm:max-w-full print:pt-6"><div class="sy-breadcrumbs" role="navigation">
  <div class="sy-breadcrumbs-inner flex items-center">
    <div class="md:hidden mr-3">
      <button class="js-menu" aria-label="Menu" type="button" aria-controls="lside" aria-expanded="false">
        <i class="i-lucide menu"></i>
      </button>
    </div>
    <ol class="flex-1" itemscope itemtype="https://schema.org/BreadcrumbList"><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a itemprop="item" href="../index.html"><span itemprop="name">Dev_zero_to_hero</span></a>
        <span>/</span>
        <meta itemprop="position" content="1" />
      </li><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <strong itemprop="name">Day4 SSHä¸Django</strong>
        <meta itemprop="position" content="2" />
      </li></ol>
    <div class="xl:hidden ml-1">
      <button class="js-menu" aria-label="Show table of contents" type="button" aria-controls="rside"
        aria-expanded="false">
        <i class="i-lucide outdent"></i>
      </button>
    </div>
  </div>
</div><div class="flex flex-col break-words justify-between">
      <div class="min-w-0 max-w-6xl px-6 pb-6 pt-8 xl:px-12">
        <article class="yue" role="main">
          <section id="day4-sshdjango">
<h1>Day4 SSHä¸Django<a class="headerlink" href="#day4-sshdjango" title="Link to this heading">Â¶</a></h1>
<section id="windowsssh">
<h2>Windowsç³»ç»Ÿä¸‹çš„sshå¯†é’¥<a class="headerlink" href="#windowsssh" title="Link to this heading">Â¶</a></h2>
<p>ä¸ºäº†é¿å…æ¯æ¬¡ç™»å½•æœåŠ¡å™¨éƒ½éœ€è¦è¾“å¯†ç çš„è¿™ä¸ªéº»çƒ¦çš„é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•è§£å†³ã€‚</p>
<p>å¦‚æœä½ çš„ç³»ç»Ÿæ˜¯macï¼Œé‚£ä¹ˆè¿™ä¸ªé—®é¢˜å°†ä¼šå˜çš„å¾ˆç®€å•ï¼Œä½¿ç”¨å‘½ä»¤</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">ssh</span><span class="o">-</span><span class="n">copy</span><span class="o">-</span><span class="nb">id</span> <span class="n">userid</span><span class="nd">@æœåŠ¡å™¨åœ°å€</span>
</span></pre></div>
</div>
<p>å¦‚æœä½ çš„ç³»ç»Ÿæ˜¯Windowsï¼Œé‚£ä¹ˆå…ˆåœ¨Powershellé‡Œé¢è¾“å…¥</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">ssh</span><span class="o">-</span><span class="n">keygen</span>
</span></pre></div>
</div>
<p>ç„¶åä¸€è·¯å›è½¦ï¼Œç›´åˆ°çœ‹åˆ°ç”Ÿæˆäº†ä¸€äº›â€œå¥‡æ€ªçš„å›¾å½¢â€ï¼Œå‘½ä»¤è¡Œä¹Ÿå¯ä»¥å†æ¬¡è¾“å…¥äº†ã€‚è¿™æ—¶å€™è¾“å…¥</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1">type $env:USERPROFILE\.ssh\id_rsa.pub | ssh xxx@spider1.utlab.ltd &quot;cat &gt;&gt; ~/.ssh/authorized_keys&quot;
</span></pre></div>
</div>
<p>å°†è¿™é‡Œçš„xxxæ¢æˆä½ çš„åå­—ï¼Œå¦‚æœä½ çš„æœåŠ¡å™¨åœ°å€ä¸ä¸€æ ·ï¼Œè‡ªè¡Œæ›´æ”¹å³å¯ã€‚</p>
<p>ä»ç°åœ¨å¼€å§‹ï¼Œä½ å†ç™»å½•ä½ çš„æœåŠ¡å™¨ï¼Œå°±ä¸éœ€è¦è¾“å¯†ç äº†ã€‚</p>
</section>
<section id="django">
<h2>Django<a class="headerlink" href="#django" title="Link to this heading">Â¶</a></h2>
<p>é¦–å…ˆè¿›å…¥æœåŠ¡å™¨ä¹‹åï¼Œå…ˆå®‰è£…Django</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">pip</span> <span class="n">install</span> <span class="n">django</span>
</span></pre></div>
</div>
<p>å®‰è£…å¥½ä¹‹åï¼Œä½¿ç”¨å‘½ä»¤åˆ›å»ºä¸€ä¸ªé¡¹ç›®</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">django</span><span class="o">-</span><span class="n">admin</span> <span class="n">startproject</span> <span class="n">é¡¹ç›®å</span>
</span></pre></div>
</div>
<p>ç„¶åç®€å•ä»‹ç»ä¸€ä¸‹é¡¹ç›®çš„æ¡†æ¶ï¼Œä»¥ä¸‹çš„é¡¹ç›®åéƒ½æ˜¯mysiteï¼š</p>
<ul class="simple">
<li><p>æœ€å¤–å±‚çš„ <strong>mysite/</strong> æ ¹ç›®å½•åªæ˜¯ä½ é¡¹ç›®çš„å®¹å™¨ï¼Œ æ ¹ç›®å½•åç§°å¯¹ Django æ²¡æœ‰å½±å“ï¼Œä½ å¯ä»¥å°†å®ƒé‡å‘½åä¸ºä»»ä½•ä½ å–œæ¬¢çš„åç§°ã€‚</p></li>
<li><p><strong>manage.py</strong>: ä¸€ä¸ªè®©ä½ ç”¨å„ç§æ–¹å¼ç®¡ç† Django é¡¹ç›®çš„å‘½ä»¤è¡Œå·¥å…·ã€‚</p></li>
<li><p>é‡Œé¢ä¸€å±‚çš„ <strong>mysite/</strong> ç›®å½•åŒ…å«ä½ çš„é¡¹ç›®ï¼Œå®ƒæ˜¯ä¸€ä¸ªçº¯ Python åŒ…ã€‚å®ƒçš„åå­—å°±æ˜¯å½“ä½ å¼•ç”¨å®ƒå†…éƒ¨ä»»ä½•ä¸œè¥¿æ—¶éœ€è¦ç”¨åˆ°çš„ Python åŒ…åã€‚ (æ¯”å¦‚ mysite.urls).</p></li>
<li><p><strong>mysite/<strong>init</strong>.py</strong>ï¼šä¸€ä¸ªç©ºæ–‡ä»¶ï¼Œå‘Šè¯‰ Python è¿™ä¸ªç›®å½•åº”è¯¥è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ª Python åŒ…ã€‚</p></li>
<li><p><strong>mysite/settings.py</strong>ï¼šDjango é¡¹ç›®çš„é…ç½®æ–‡ä»¶ã€‚</p></li>
<li><p><strong>mysite/urls.py</strong>ï¼šDjango é¡¹ç›®çš„ URL å£°æ˜ï¼Œå°±åƒä½ ç½‘ç«™çš„â€œç›®å½•â€ã€‚</p></li>
<li><p><strong>mysite/asgi.py</strong>ï¼šä½œä¸ºä½ çš„é¡¹ç›®çš„è¿è¡Œåœ¨ ASGI å…¼å®¹çš„ Web æœåŠ¡å™¨ä¸Šçš„å…¥å£ã€‚</p></li>
<li><p><strong>mysite/wsgi.py</strong>ï¼šä½œä¸ºä½ çš„é¡¹ç›®çš„è¿è¡Œåœ¨ WSGI å…¼å®¹çš„WebæœåŠ¡å™¨ä¸Šçš„å…¥å£ã€‚</p></li>
</ul>
<p>ç°åœ¨å¯ä»¥ç”¨</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">runserver</span> <span class="mi">0</span><span class="p">:</span><span class="mi">30009</span>
</span></pre></div>
</div>
<p>è¿è¡Œä½ çš„é¡¹ç›®ï¼Œæˆ‘è¿™é‡Œçš„ç¤ºä¾‹ç«¯å£æ˜¯30009ï¼Œ<strong>è¯·é€‰æ‹©ä¸è¦å†²çªçš„ç«¯å£</strong>ã€‚</p>
<p>äºæ˜¯è¿™é‡Œå¯ä»¥è¿›å…¥<code class="docutils literal notranslate"><span class="pre">http://0.0.0.0:30009</span></code>æŸ¥çœ‹ä½ çš„ç½‘é¡µï¼Œä½†æ˜¯åº”è¯¥ä¼šå‡ºç°ä¸€ä¸ªä¸å¤ªå‹å¥½çš„ç•Œé¢ã€‚</p>
<p><img alt="" src="https://files.mdnice.com/user/58281/56ac833b-e8b4-4a7e-95d2-56c1679798a7.png" /></p>
<p>éœ€è¦ä¿®æ”¹é¡¹ç›®æ–‡ä»¶é‡Œçš„<strong>settings.py</strong>ï¼Œå°†<code class="docutils literal notranslate"><span class="pre">ALLOWED_HOSTS</span> <span class="pre">=</span> <span class="pre">[]</span></code>ä¿®æ”¹ä¸º<code class="docutils literal notranslate"><span class="pre">ALLOWED_HOSTS</span> <span class="pre">=</span> <span class="pre">[&quot;*&quot;]</span></code></p>
<p>å†æ¬¡è¿›å…¥ä½ çš„ç«¯å£</p>
<p><img alt="" src="https://files.mdnice.com/user/58281/fd4f5efb-285a-46d5-932f-1b3a08a16933.png" /></p>
<p>å‡ºç°äº†ä¸€ä¸ªå°ç«ç®­ï¼Œè¯´æ˜è¿è¡ŒæˆåŠŸäº†ã€‚</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">startapp</span> <span class="n">polls</span>
</span></pre></div>
</div>
<p>ç°åœ¨æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸ºpollsçš„æŠ•ç¥¨é¡¹ç›®ï¼Œé¡¹ç›®çš„æ–‡ä»¶å¤¹ä¸‹é¢å¤šå‡ºäº†ä¸€ä¸ªåä¸ºpollsçš„æ–‡ä»¶å¤¹ã€‚</p>
<p><img alt="" src="https://files.mdnice.com/user/58281/2e6a7682-8440-4f4b-a25c-29c3cc36b899.png" /></p>
<p>æ‰“å¼€pollsç›®å½•ä¸‹çš„views.pyæ–‡ä»¶ï¼Œæ·»åŠ è¿™æ®µä»£ç </p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponse</span>
</span><span data-line="2">
</span><span data-line="3">
</span><span data-line="4"><span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
</span><span data-line="5">    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s2">&quot;Hello, world. You&#39;re at the polls index.&quot;</span><span class="p">)</span>
</span><span data-line="6">
</span></pre></div>
</div>
<p><img alt="" src="https://files.mdnice.com/user/58281/d066fcce-7afb-4aa2-97bb-0846b299cf59.png" /></p>
<p>è¿™æ˜¯ç¼–å†™çš„ç¬¬ä¸€ä¸ªè§†å›¾ï¼Œè¦å°†ç¬¬ä¸€ä¸ªURLæ˜ å°„åˆ°å®ƒã€‚å¯¹åº”çš„indexæ˜¯è·¯å¾„ä¸‹éœ€è¦æ¸²æŸ“çš„httpsï¼Œç¬¬ä¸€ä¸ªéœ€è¦ä¿®æ”¹åº”ç”¨çš„urlã€‚</p>
<p>ç„¶åï¼Œåœ¨è¿™ä¸ªç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªurls.pyæ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span> <span class="nn">django.urls</span> <span class="kn">import</span> <span class="n">path</span>
</span><span data-line="2">
</span><span data-line="3"><span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">views</span>
</span><span data-line="4">
</span><span data-line="5"><span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
</span><span data-line="6">    <span class="n">path</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;index&quot;</span><span class="p">),</span>
</span><span data-line="7"><span class="p">]</span>
</span></pre></div>
</div>
<p><img alt="" src="https://files.mdnice.com/user/58281/b9e06d75-e4e1-483d-8c83-c7e9f3dca06e.png" /></p>
<p>æ•è·äº†urlä¸ºç©ºï¼Œè°ƒç”¨views.indexå‡½æ•°ï¼Œä¸Šé¢ç¼–å†™çš„ã€‚</p>
<p>ç„¶ååœ¨ mysite/urls.py æ–‡ä»¶çš„ urlpatterns åˆ—è¡¨é‡Œæ’å…¥ä¸€ä¸ª include()ï¼Œæˆ–è€…ç›´æ¥æ›¿æ¢é‡Œé¢æ‰€æœ‰çš„å†…å®¹ä¸ºä»¥ä¸‹å†…å®¹</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
</span><span data-line="2"><span class="kn">from</span> <span class="nn">django.urls</span> <span class="kn">import</span> <span class="n">include</span><span class="p">,</span> <span class="n">path</span>
</span><span data-line="3">
</span><span data-line="4"><span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
</span><span data-line="5">    <span class="n">path</span><span class="p">(</span><span class="s2">&quot;polls/&quot;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s2">&quot;polls.urls&quot;</span><span class="p">)),</span>
</span><span data-line="6">    <span class="n">path</span><span class="p">(</span><span class="s2">&quot;admin/&quot;</span><span class="p">,</span> <span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">),</span>
</span><span data-line="7"><span class="p">]</span>
</span></pre></div>
</div>
<p>ä½†ç¬¬ä¸€ä¸ªurlä¸å¤Ÿï¼Œéœ€è¦åœ¨å¤§çš„é¡¹ç›®ä¸Šå®šä¹‰ã€‚è¿™ä¸€æ­¥æŠŠåˆšæ‰çš„å…¨éƒ¨æŠ“åˆ°å¤§é¡¹ç›®çš„ä¸»è¦éƒ¨åˆ†ã€‚
<img alt="" src="https://files.mdnice.com/user/58281/3d1cf009-fa58-4c84-b3c3-94de12456eeb.png" /></p>
<p>è¿™é‡Œæˆ‘è¿æ¥çš„æœåŠ¡å™¨æ˜¯spider1.utlab.ltdï¼Œåœ¨30009ç«¯å£ä¸Šå¼€å¯ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘åœ¨æµè§ˆå™¨æ‰“å¼€<code class="docutils literal notranslate"><span class="pre">http://spider1.utlab.ltd:30009/polls/</span></code></p>
<p><img alt="" src="https://files.mdnice.com/user/58281/bd4b3197-68b5-45f7-b7ea-037ffdce6791.png" /></p>
<p>æˆåŠŸå‡ºç°äº†hello worldã€‚</p>
<section id="id1">
<h3>æ•°æ®åº“<a class="headerlink" href="#id1" title="Link to this heading">Â¶</a></h3>
<p>Djangoé»˜è®¤çš„æ•°æ®åº“æ˜¯SQLiteã€‚é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹å·²ç»æœ‰äº†è¿™ä¸ªæ–‡ä»¶</p>
<p><img alt="" src="https://files.mdnice.com/user/58281/977638b7-4bf8-428b-9e66-393f860ca95a.png" /></p>
<p>ç›®å‰å…ˆä¸è€ƒè™‘ä½¿ç”¨åˆ«çš„æ•°æ®åº“ï¼Œå› ä¸ºéœ€è¦æ·»åŠ ä¸€äº›é¢å¤–çš„è®¾ç½®ã€‚å…ˆä¸ç®¡æ—¶åŒºï¼Œå¦‚æœä»¥åéœ€è¦ä¸Šçº¿å†è¿›è¡Œä¿®æ”¹ã€‚</p>
<p>ä½¿ç”¨</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">migrate</span>
</span></pre></div>
</div>
<p>å¯ç”¨æ•°æ®åº“</p>
<p><img alt="" src="https://files.mdnice.com/user/58281/d60ee21d-fe40-4a72-bb2a-a2986047dcc8.png" /></p>
<p>ä½¿ç”¨è¿™ä¸ªå‘½ä»¤</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">sqlite3</span> <span class="n">db</span><span class="o">.</span><span class="n">sqlite3</span>
</span></pre></div>
</div>
<p>å°±å¯ä»¥è¿›å…¥æ•°æ®åº“ï¼Œä½¿ç”¨ä¸€äº›SQLè¯­å¥äº†ã€‚</p>
<p>ç¼–è¾‘æ¨¡å‹polls/models.py</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
</span><span data-line="2">
</span><span data-line="3">
</span><span data-line="4"><span class="k">class</span> <span class="nc">Question</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span><span data-line="5">    <span class="n">question_text</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</span><span data-line="6">    <span class="n">pub_date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="s2">&quot;date published&quot;</span><span class="p">)</span>
</span><span data-line="7">
</span><span data-line="8">
</span><span data-line="9"><span class="k">class</span> <span class="nc">Choice</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span><span data-line="10">    <span class="n">question</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Question</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
</span><span data-line="11">    <span class="n">choice_text</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</span><span data-line="12">    <span class="n">votes</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span></pre></div>
</div>
<p>ç¼–è¾‘ polls/apps.py ä¸­</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">[</span>
</span><span data-line="2">    <span class="s2">&quot;polls.apps.PollsConfig&quot;</span><span class="p">,</span>
</span><span data-line="3">    <span class="s2">&quot;django.contrib.admin&quot;</span><span class="p">,</span>
</span><span data-line="4">    <span class="s2">&quot;django.contrib.auth&quot;</span><span class="p">,</span>
</span><span data-line="5">    <span class="s2">&quot;django.contrib.contenttypes&quot;</span><span class="p">,</span>
</span><span data-line="6">    <span class="s2">&quot;django.contrib.sessions&quot;</span><span class="p">,</span>
</span><span data-line="7">    <span class="s2">&quot;django.contrib.messages&quot;</span><span class="p">,</span>
</span><span data-line="8">    <span class="s2">&quot;django.contrib.staticfiles&quot;</span><span class="p">,</span>
</span><span data-line="9"><span class="p">]</span>
</span></pre></div>
</div>
<p>æ·»åŠ äº†<code class="docutils literal notranslate"><span class="pre">&quot;polls.apps.PollsConfig&quot;,</span></code>è¿™ä¸€è¡Œ</p>
<p>è¿è¡Œä»¥ä¸‹çš„è¿™ä¸¤è¡Œä»£ç è¿ç§»å¹¶åŒæ­¥ç®¡ç†ä½ çš„æ•°æ®åº“ç»“æ„ï¼š</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">sqlmigrate</span> <span class="n">polls</span> <span class="mi">0001</span>
</span><span data-line="2">
</span><span data-line="3"><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">migrate</span> 
</span></pre></div>
</div>
</section>
<section id="id2">
<h3>ç®¡ç†å‘˜è´¦å·<a class="headerlink" href="#id2" title="Link to this heading">Â¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">createsuperuser</span>
</span><span data-line="2">
</span><span data-line="3"><span class="n">Username</span><span class="p">:</span> <span class="n">admin</span>
</span><span data-line="4">
</span><span data-line="5"><span class="n">Email</span> <span class="n">address</span><span class="p">:</span> <span class="n">admin</span><span class="nd">@example</span><span class="o">.</span><span class="n">com</span>
</span></pre></div>
</div>
<p>ç„¶åè¾“å…¥å¯†ç ï¼Œå¦‚æœä½ çš„å¯†ç è¿‡äºç®€å•ä¼šè¢«è­¦å‘Šï¼Œè¿™é‡Œå¦‚æœä¸æƒ³ç®¡ä»–ï¼Œè¾“å…¥yå³å¯ã€‚æ¥ä¸‹æ¥ï¼Œä½ å·²ç»æˆä¸ºäº†ç½‘ç«™ç®¡ç†å‘˜äº†ï¼</p>
<p>è¿™é‡Œå¯åŠ¨å¼€å‘æœåŠ¡å™¨çš„å‰æä¸‹ï¼Œè½¬åˆ°æœ¬åœ°çš„ç›®å½•ï¼Œè¿˜æ˜¯ä»¥æˆ‘çš„urlä¸ºä¾‹</p>
<p><code class="docutils literal notranslate"><span class="pre">http://spider1.utlab.ltd:30009/admin/</span></code></p>
<p><img alt="" src="https://files.mdnice.com/user/58281/656822cf-3a14-4539-9655-1c4534d32c3a.png" /></p>
<p>ç°åœ¨æ¥åˆ°äº†ä¸€ä¸ªç™»å½•é¡µé¢ï¼Œè¾“å…¥è´¦å·å¯†ç ä¹‹åå³å¯ç™»å½•ã€‚</p>
<p><img alt="" src="https://files.mdnice.com/user/58281/18ccd2cb-a65f-46cc-aa25-a43cfce960e2.png" /></p>
<p>æ‰“å¼€ polls/admin.py æ–‡ä»¶ï¼ŒæŠŠå®ƒç¼–è¾‘æˆä¸‹é¢è¿™æ ·</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
</span><span data-line="2">
</span><span data-line="3"><span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Question</span>
</span><span data-line="4">
</span><span data-line="5"><span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Question</span><span class="p">)</span>
</span></pre></div>
</div>
<p>ç°åœ¨åœ¨ç½‘ç«™çš„ç®¡ç†ç•Œé¢ä¸Šå·²ç»æœ‰äº†POLLSé‡Œé¢çš„Questionsç±»ï¼Œå¯ä»¥ä½¿ç”¨äº†ã€‚</p>
<p>æ¥ä¸‹æ¥æŒ‰ç…§æ•™ç¨‹ï¼Œå¼€å§‹åˆ›å»ºæ¥å£</p>
<p>å‘ polls/views.py é‡Œæ·»åŠ æ›´å¤šè§†å›¾</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="k">def</span> <span class="nf">detail</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">question_id</span><span class="p">):</span>
</span><span data-line="2">    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s2">&quot;You&#39;re looking at question </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="n">question_id</span><span class="p">)</span>
</span><span data-line="3">
</span><span data-line="4">
</span><span data-line="5"><span class="k">def</span> <span class="nf">results</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">question_id</span><span class="p">):</span>
</span><span data-line="6">    <span class="n">response</span> <span class="o">=</span> <span class="s2">&quot;You&#39;re looking at the results of question </span><span class="si">%s</span><span class="s2">.&quot;</span>
</span><span data-line="7">    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">response</span> <span class="o">%</span> <span class="n">question_id</span><span class="p">)</span>
</span><span data-line="8">
</span><span data-line="9">
</span><span data-line="10"><span class="k">def</span> <span class="nf">vote</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">question_id</span><span class="p">):</span>
</span><span data-line="11">    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s2">&quot;You&#39;re voting on question </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="n">question_id</span><span class="p">)</span>
</span></pre></div>
</div>
<p>æŠŠè¿™äº›æ–°è§†å›¾æ·»åŠ è¿› polls.urls æ¨¡å—é‡Œ</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span> <span class="nn">django.urls</span> <span class="kn">import</span> <span class="n">path</span>
</span><span data-line="2">
</span><span data-line="3"><span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">views</span>
</span><span data-line="4">
</span><span data-line="5"><span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
</span><span data-line="6">    <span class="c1"># ex: /polls/</span>
</span><span data-line="7">    <span class="n">path</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;index&quot;</span><span class="p">),</span>
</span><span data-line="8">    <span class="c1"># ex: /polls/5/</span>
</span><span data-line="9">    <span class="n">path</span><span class="p">(</span><span class="s2">&quot;&lt;int:question_id&gt;/&quot;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">detail</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;detail&quot;</span><span class="p">),</span>
</span><span data-line="10">    <span class="c1"># ex: /polls/5/results/</span>
</span><span data-line="11">    <span class="n">path</span><span class="p">(</span><span class="s2">&quot;&lt;int:question_id&gt;/results/&quot;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">results</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;results&quot;</span><span class="p">),</span>
</span><span data-line="12">    <span class="c1"># ex: /polls/5/vote/</span>
</span><span data-line="13">    <span class="n">path</span><span class="p">(</span><span class="s2">&quot;&lt;int:question_id&gt;/vote/&quot;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">vote</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;vote&quot;</span><span class="p">),</span>
</span><span data-line="14"><span class="p">]</span>
</span></pre></div>
</div>
<p>ä¿®æ”¹polls/views.py</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponse</span>
</span><span data-line="2">
</span><span data-line="3"><span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Question</span>
</span><span data-line="4">
</span><span data-line="5">
</span><span data-line="6"><span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
</span><span data-line="7">    <span class="n">latest_question_list</span> <span class="o">=</span> <span class="n">Question</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s2">&quot;-pub_date&quot;</span><span class="p">)[:</span><span class="mi">5</span><span class="p">]</span>
</span><span data-line="8">    <span class="n">output</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">q</span><span class="o">.</span><span class="n">question_text</span> <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">latest_question_list</span><span class="p">])</span>
</span><span data-line="9">    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
</span><span data-line="10">
</span><span data-line="11">
</span><span data-line="12"><span class="c1"># Leave the rest of the views (detail, results, vote) unchanged</span>
</span></pre></div>
</div>
<p>ç°åœ¨ï¼Œåœ¨polls ç›®å½•é‡Œåˆ›å»ºä¸€ä¸ª templates ç›®å½•ã€‚åœ¨ä½ åˆšåˆšåˆ›å»ºçš„ templates ç›®å½•é‡Œï¼Œå†åˆ›å»ºä¸€ä¸ªç›®å½• pollsï¼Œç„¶ååœ¨å…¶ä¸­æ–°å»ºä¸€ä¸ªæ–‡ä»¶ index.html ã€‚</p>
<p>è¾“å…¥ä»¥ä¸‹ä»£ç </p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="n">latest_question_list</span> <span class="o">%</span><span class="p">}</span>
</span><span data-line="2">    <span class="o">&lt;</span><span class="n">ul</span><span class="o">&gt;</span>
</span><span data-line="3">    <span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="n">question</span> <span class="ow">in</span> <span class="n">latest_question_list</span> <span class="o">%</span><span class="p">}</span>
</span><span data-line="4">        <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s2">&quot;/polls/{{ question.id }}/&quot;</span><span class="o">&gt;</span><span class="p">{{</span> <span class="n">question</span><span class="o">.</span><span class="n">question_text</span> <span class="p">}}</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span><span data-line="5">    <span class="p">{</span><span class="o">%</span> <span class="n">endfor</span> <span class="o">%</span><span class="p">}</span>
</span><span data-line="6">    <span class="o">&lt;/</span><span class="n">ul</span><span class="o">&gt;</span>
</span><span data-line="7"><span class="p">{</span><span class="o">%</span> <span class="k">else</span> <span class="o">%</span><span class="p">}</span>
</span><span data-line="8">    <span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">No</span> <span class="n">polls</span> <span class="n">are</span> <span class="n">available</span><span class="o">.&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span data-line="9"><span class="p">{</span><span class="o">%</span> <span class="n">endif</span> <span class="o">%</span><span class="p">}</span>
</span></pre></div>
</div>
<p>æ›´æ–°ä¸€ä¸‹ polls/views.py é‡Œçš„ index è§†å›¾</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1">from django.http import HttpResponse
</span><span data-line="2">from django.template import loader
</span><span data-line="3">
</span><span data-line="4">from .models import Question
</span><span data-line="5">
</span><span data-line="6">
</span><span data-line="7">def index(request):
</span><span data-line="8">    latest_question_list = Question.objects.order_by(&quot;-pub_date&quot;)[:5]
</span><span data-line="9">    template = loader.get_template(&quot;polls/index.html&quot;)
</span><span data-line="10">    context = {
</span><span data-line="11">        &quot;latest_question_list&quot;: latest_question_list,
</span><span data-line="12">    }
</span><span data-line="13">    return HttpResponse(template.render(context, request))
</span><span data-line="14">
</span><span data-line="15">![](https://files.mdnice.com/user/58281/65333fc4-4ec7-455a-9275-c38cb20949bd.png)
</span><span data-line="16">
</span></pre></div>
</div>
<p>åˆ°è¿™é‡Œä¸ºæ­¢ï¼Œæ‰åªåˆ°äº†Djangoå®˜æ–¹æ–‡æ¡£çš„å¾ˆå°ä¸€éƒ¨åˆ†ã€‚è¿™ä»½æ–‡æ¡£å·ç§°ç¼–ç¨‹ç•Œæœ€é¡¶çº§çš„æ–‡æ¡£ä¹‹ä¸€ï¼Œå»ºè®®æœ‰æ—¶é—´æ—¶ï¼Œæ¯ä¸ªäººéƒ½å¯ä»¥çœ‹ä¸€çœ‹ã€‚</p>
</section>
</section>
</section>

        </article><button class="back-to-top" type="button">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
  </svg>
  <span>å›åˆ°é¡¶éƒ¨</span>
</button><div class="navigation flex print:hidden"><div class="navigation-prev">
    <a href="2024-summer-day3.html">
      <i class="i-lucide chevron-left"></i>
      <div class="page-info">
        <span>ä¸Šä¸€ç« </span><div class="title">Day3 Python å¼€å‘ç¯å¢ƒæ­è½½</div></div>
    </a>
  </div><div class="navigation-next">
    <a href="2024-summer-day5.html">
      <div class="page-info">
        <span>ä¸‹ä¸€ç« </span>
        <div class="title">Day5 Dockerä¸å°çº¢ä¹¦çˆ¬è™«é¡¹ç›®</div>
      </div>
      <i class="i-lucide chevron-right"></i>
    </a>
  </div></div></div>
    </div>
  </main>
</div>
<footer class="sy-foot">
  <div class="sy-foot-inner sy-container mx-auto">
    <div class="sy-foot-reserved md:flex justify-between items-center">
      <div class="sy-foot-copyright"><p>2024, ezelab</p>
  
  <p>
    Made with
    
    <a href="https://www.sphinx-doc.org/">Sphinx</a> and
    
    <a href="https://shibuya.lepture.com">Shibuya theme</a>.
  </p>
</div>
      <div class="sy-foot-socials"></div>
    </div>
  </div>
</footer>
      <script src="../_static/documentation_options.js?v=a1b8b494"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=f281be69"></script>
      <script kind="utterances">

    var commentsRunWhenDOMLoaded = cb => {
    if (document.readyState != 'loading') {
        cb()
    } else if (document.addEventListener) {
        document.addEventListener('DOMContentLoaded', cb)
    } else {
        document.attachEvent('onreadystatechange', function() {
        if (document.readyState == 'complete') cb()
        })
    }
}

var addUtterances = () => {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src = "https://utteranc.es/client.js";
    script.async = "async";

    script.setAttribute("repo", "EZEORG/dev_zero_to_hero");
    script.setAttribute("issue-term", "pathname");
    script.setAttribute("theme", "github-light");
    script.setAttribute("label", "ğŸ’¬ comment");
    script.setAttribute("crossorigin", "anonymous");

    sections = document.querySelectorAll("div.section");
    if (sections !== null) {
        section = sections[sections.length-1];
        section.appendChild(script);
    }
}
commentsRunWhenDOMLoaded(addUtterances);
</script>
      <script src="../_static/design-tabs.js?v=f930bc37"></script>
      <script src="../_static/shibuya.js?v=e2e99575"></script></body>
</html>